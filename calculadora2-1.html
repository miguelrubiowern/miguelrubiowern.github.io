<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Arqueo Avanzada</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #e10600;
      margin-bottom: 20px;
    }
    .contenedor {
      max-width: 550px;
      margin: auto;
      background: #000;
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #e10600;
      box-shadow: 0 0 12px rgba(225,6,0,0.7);
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
      color: #fff;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
      border: 2px solid #e10600;
      border-radius: 5px;
      background: #222;
      color: #fff;
      font-size: 16px;
    }
    input:focus { outline: none; border-color: #fff; }
    button {
      margin-top: 15px;
      padding: 12px;
      width: 100%;
      background: #e10600;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
      font-weight: bold;
      text-transform: uppercase;
    }
    button:hover { background: #b00400; }

    .tarjeta {
      margin-top: 16px;
      padding: 12px;
      border-radius: 8px;
      border: 2px solid #fff;
      font-weight: bold;
      text-align: center;
    }
    .ok   { background: #444; color:#fff; }
    .pos  { background: #28a745; color:#fff; }
    .neg  { background: #dc3545; color:#fff; }

    .comparacion {
      margin-top: 15px;
      padding: 10px;
      font-size: 16px;
      text-align: center;
      border-radius: 6px;
      font-weight: bold;
    }
    .coincide   { background: #28a745; border: 2px solid #fff; color: #fff; }
    .noCoincide { background: #dc3545; border: 2px solid #fff; color: #fff; }

    hr { border: 1px solid #e10600; margin: 15px 0; }
  </style>
</head>
<body>
  <div class="contenedor">
    <h1>Calculadora de Arqueo Avanzada</h1>

    <!-- Billetes -->
    <label for="billetes">Billetes contados (€):</label>
    <input type="number" id="billetes" step="0.01">

    <label for="traspasoBilletes">Traspaso billetes (€):</label>
    <input type="number" id="traspasoBilletes" step="0.01">

    <label for="valorMaquinaBilletes">Valor máquina billetes (€):</label>
    <input type="number" id="valorMaquinaBilletes" step="0.01">

    <hr>

    <!-- Monedas -->
    <label for="monedas">Monedas contadas (€):</label>
    <input type="number" id="monedas" step="0.01">

    <label for="traspasoMonedas">Traspaso monedas (€):</label>
    <input type="number" id="traspasoMonedas" step="0.01">

    <label for="valorMaquinaMonedas">Valor máquina monedas (€):</label>
    <input type="number" id="valorMaquinaMonedas" step="0.01">

    <label for="dineroDejado">Dinero dejado en la máquina (€):</label>
    <input type="number" id="dineroDejado" step="0.01">

    <hr>

    <!-- Tecnausa -->
    <label for="tecnausa">Valor Tecnausa (€):</label>
    <input type="number" id="tecnausa" step="0.01">

    <button onclick="calcular()">Calcular Arqueo</button>

    <!-- Resultados -->
    <div id="resBilletes" class="tarjeta"></div>
    <div id="resMonedas" class="tarjeta"></div>
    <div id="resTotal" class="tarjeta"></div>
    <div id="comparacion" class="comparacion"></div>
  </div>

  <script>
    function n(v){ return parseFloat(v) || 0; }
    function round2(x){ return Math.round(x * 100) / 100; }
    function eur(x){ return round2(x).toLocaleString('es-ES',{minimumFractionDigits:2, maximumFractionDigits:2}); }

    function calcular(){
      const billetes     = n(document.getElementById('billetes').value);
      const traspasoB    = n(document.getElementById('traspasoBilletes').value);
      const valorMB      = n(document.getElementById('valorMaquinaBilletes').value);

      const monedas      = n(document.getElementById('monedas').value);
      const traspasoM    = n(document.getElementById('traspasoMonedas').value);
      const valorMM      = n(document.getElementById('valorMaquinaMonedas').value);
      const dejado       = n(document.getElementById('dineroDejado').value);

      const tecnausa     = n(document.getElementById('tecnausa').value);

      // Diferencia billetes
      const difBilletes = (billetes + traspasoB) - valorMB;
      const resB = document.getElementById('resBilletes');
      resB.className = 'tarjeta';
      if(difBilletes>0){ resB.classList.add('pos'); resB.textContent = 'BILLETES: SOBRA ' + eur(difBilletes) + ' €'; }
      else if(difBilletes<0){ resB.classList.add('neg'); resB.textContent = 'BILLETES: FALTA ' + eur(Math.abs(difBilletes)) + ' €'; }
      else{ resB.classList.add('ok'); resB.textContent = 'BILLETES: CUADRA perfectamente'; }

      // Diferencia monedas (considerando dinero dejado)
      const difMonedas = (monedas + traspasoM) - (valorMM + dejado);
      const resM = document.getElementById('resMonedas');
      resM.className = 'tarjeta';
      if(difMonedas>0){ resM.classList.add('pos'); resM.textContent = 'MONEDAS: SOBRA ' + eur(difMonedas) + ' €'; }
      else if(difMonedas<0){ resM.classList.add('neg'); resM.textContent = 'MONEDAS: FALTA ' + eur(Math.abs(difMonedas)) + ' €'; }
      else{ resM.classList.add('ok'); resM.textContent = 'MONEDAS: CUADRA perfectamente'; }

      // Total diferencia
      const total = difBilletes + difMonedas;
      const resT = document.getElementById('resTotal');
      resT.className = 'tarjeta';
      if(total>0){ resT.classList.add('pos'); resT.textContent = 'TOTAL ARQUEO: SOBRA ' + eur(total) + ' €'; }
      else if(total<0){ resT.classList.add('neg'); resT.textContent = 'TOTAL ARQUEO: FALTA ' + eur(Math.abs(total)) + ' €'; }
      else{ resT.classList.add('ok'); resT.textContent = 'TOTAL ARQUEO: CUADRA perfectamente'; }

      // Comparación con Tecnausa (sobre el total)
      const cmp = document.getElementById('comparacion');
      cmp.className = 'comparacion';
      if(tecnausa===0){ cmp.textContent = ''; }
      else{
        const a2 = round2(total);
        const t2 = round2(tecnausa);
        if(a2 === t2){ cmp.textContent = '✅ Coincide con Tecnausa'; cmp.classList.add('coincide'); }
        else{ cmp.textContent = '⚠️ Diferencia con Tecnausa: ' + eur(a2-t2) + ' €'; cmp.classList.add('noCoincide'); }
      }
    }
  </script>
</body>
</html>